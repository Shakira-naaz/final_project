{% extends 'Basic.html' %}
{% block body %}
{% load static %}

	<!-- MAIN-CONTENT-SECTION START -->
	<section class="main-content-section">
		<div class="container">

			<div class="row">
				<div class="col-md-3 col-12">
                    <h4>Sale:</h4>
                  	<img src="{% static 'img/paytm.jpg' %}" alt="category-header" />
                  	<img src="{% static 'img/70%.webp' %}" alt="category-header" />
					<!-- SINGLE SIDEBAR TAG END -->
				</div>
				<div class="col-md-9 col-12">
					<div class="right-all-product">

						<div class="product-category-title">
							<!-- PRODUCT-CATEGORY-TITLE START -->
							<h1>
								<span class="cat-name">{{ i.category }}</span>
								<span class="count-product">There are {{ forloop.counter }} products.</span>
							</h1>
							<!-- PRODUCT-CATEGORY-TITLE END -->
						</div>
					</div>
					<!-- ALL GATEGORY-PRODUCT START -->
					<div class="all-gategory-product">
						<div class="row gategory-product">
{% for i in all_prod %}
							<!-- SINGLE ITEM START -->
							<div class="col-xl-3 col-lg-4 col-md-6 col-12">
								<div class="gategory-product-list">
									<div class="single-product-item">
										<div class="product-image">
											<a href="single-product.html"><img src="/media/{{ i.image }}"
													alt="product-image" height="180px" /></a>
											<div class="overlay-content">
												<ul>
													<li><a href="#" title="Quick view"><i class="fa fa-search"></i></a>
													</li>
													<li><a href="#" title="Quick view"><i
																class="fa fa-shopping-cart"></i></a></li>
													<li><a href="#" title="Quick view"><i class="fa fa-retweet"></i></a>
													</li>
													<li><a href="#" title="Quick view"><i class="fa fa-heart-o"></i></a>
													</li>
												</ul>
											</div>
										</div>
										<div class="product-info">
											<div class="customar-comments-box">
												<div class="rating-box">
													<i class="fa fa-star"></i>
													<i class="fa fa-star"></i>
													<i class="fa fa-star"></i>
													<i class="fa fa-star-half-empty"></i>
													<i class="fa fa-star-half-empty"></i>
												</div>
												<div class="review-box">
													<span>1 Review(s)</span>
												</div>
											</div>
											<a href="{% url 'checkout' %}" id="namepr{{ i.id }}">{{ i.product_name }}</a>
											<div class="price-box">
												<span class="price" id="pricepr{{ i.id }}">{{ i.price }}</span>
                                                <div class="divpr" id="divpr{{ i.id }}" style="width: 100%"  >
                                                                <button type="button" id="pr{{ i.id }}" class="btn  cart" style="background-color: #f1f92a">Add to cart</button>
                                                                    </div>
											</div>
										</div>
									</div>
								</div>
							</div>
    {% endfor %}
							<!-- SINGLE ITEM END -->
						</div>
					</div>
					<!-- ALL GATEGORY-PRODUCT END -->
				</div>
			</div>
		</div>
	</section>
	<!-- MAIN-CONTENT-SECTION END -->
	<!-- COMPANY-FACALITY START -->
	<section class="company-facality">
		<div class="container">
			<div class="row company-facality-row">
				<!-- SINGLE-FACALITY START -->
				<div class="col-xl-3 col-sm-6 col-12">
					<div class="single-facality">
						<div class="facality-icon">
							<i class="fa fa-rocket"></i>
						</div>
						<div class="facality-text">
							<h3 class="facality-heading-text">FREE SHIPPING</h3>
							<span>on order over $100</span>
						</div>
					</div>
				</div>
				<!-- SINGLE-FACALITY END -->
				<!-- SINGLE-FACALITY START -->
				<div class="col-xl-3 col-sm-6 col-12">
					<div class="single-facality">
						<div class="facality-icon">
							<i class="fa fa-umbrella"></i>
						</div>
						<div class="facality-text">
							<h3 class="facality-heading-text">24/7 SUPPORT</h3>
							<span>online consultations</span>
						</div>
					</div>
				</div>
				<!-- SINGLE-FACALITY END -->
				<!-- SINGLE-FACALITY START -->
				<div class="col-xl-3 col-sm-6 col-12">
					<div class="single-facality">
						<div class="facality-icon">
							<i class="fa fa-calendar"></i>
						</div>
						<div class="facality-text">
							<h3 class="facality-heading-text">DAILY UPDATES</h3>
							<span>Check out store for latest</span>
						</div>
					</div>
				</div>
				<!-- SINGLE-FACALITY END -->
				<!-- SINGLE-FACALITY START -->
				<div class="col-xl-3 col-sm-6 col-12">
					<div class="single-facality">
						<div class="facality-icon">
							<i class="fa fa-refresh"></i>
						</div>
						<div class="facality-text">
							<h3 class="facality-heading-text">30-DAY RETURNS</h3>
							<span>moneyback guarantee</span>
						</div>
					</div>
				</div>
				<!-- SINGLE-FACALITY END -->
			</div>
		</div>
	</section>
	<!-- COMPANY-FACALITY END -->
	<!-- COPYRIGHT-AREA START -->
	<footer class="copyright-area">
		<div class="container">
			<div class="row">
				<div class="col-12">
					<div class="copy-right">
						<address>Copyright Â© 2020 <a>Shakira&Urusha</a> All Rights Reserved
						</address>
					</div>
					<div class="scroll-to-top">
						<a href="#" class="bstore-scrollertop"><i class="fa fa-angle-double-up"></i></a>
					</div>
				</div>
			</div>
		</div>
	</footer>
	<!-- COPYRIGHT-AREA END -->
	<!-- JS 
		===============================================-->
	<!-- jquery js -->
	<script src="{% static 'js/vendor/jquery-1.11.3.min.js' %}"></script>

	<!-- fancybox js -->
	<script src="{% static 'js/jquery.fancybox.js' %}"></script>

	<!-- bxslider js -->
	<script src="{% static 'js/jquery.bxslider.min.js' %}"></script>

	<!-- meanmenu js -->
	<script src="{% static 'js/jquery.meanmenu.js' %}"></script>

	<!-- owl carousel js -->
	<script src="{% static 'js/owl.carousel.min.js' %}"></script>

	<!-- nivo slider js -->
	<script src="{% static 'js/jquery.nivo.slider.js' %}"></script>

	<!-- jqueryui js -->
	<script src="{% static 'js/jqueryui.js' %}"></script>

	<!-- bootstrap js -->
	<script src="{% static 'js/bootstrap.min.js' %}"></script>

	<!-- wow js -->
	<script src="{% static 'js/wow.js' %}"></script>
	<script>
		new WOW().init();
	</script>

	<!-- Google Map js -->
	<script src="https://maps.googleapis.com/maps/api/js"></script>
	<script>
		function initialize() {
			var mapOptions = {
				zoom: 8,
				scrollwheel: false,
				center: new google.maps.LatLng(35.149868, -90.046678)
			};
			var map = new google.maps.Map(document.getElementById('googleMap'),
				mapOptions);
			var marker = new google.maps.Marker({
				position: map.getCenter(),
				map: map
			});

		}
		google.maps.event.addDomListener(window, 'load', initialize);
	</script>
	<!-- main js -->
	<script src="{% static 'js/main.js' %}"></script>
    <script>
if (localStorage.getItem('cart') == null) {
    var cart = {};
} else {
    cart = JSON.parse(localStorage.getItem('cart'));
    updateCart(cart);
}
$('.divpr').on('click', 'button.cart', function () {
    var idstr = this.id.toString();
    console.log(idstr)
    mn =this.id.slice(2, );
    if (cart[idstr] != undefined) {
        cart[idstr][0] = cart[idstr][0] + 1;
    } else {
        cart[idstr] = 1;
        nam = document.getElementById('name' + idstr).innerHTML;
        price = document.getElementById('price' + idstr).innerHTML;
        cart[idstr] = [cart[idstr], nam, price];
    }
    updateCart(cart);

});

function updateCart(cart) {
    var sum = 0;
    for (var item in cart) {
        sum = sum + cart[item][0];
        document.getElementById('div' + item).innerHTML = "<button id='minus" + item + "' class='btn  minus' style='background-color: #f1f92a; font-size: 10px' >-</button> <a id='val" + item + "''>" + cart[item][0] + "</span> <button id='plus" + item + "' class='btn  plus' style='background-color: #f1f92a; font-size: 10px'> + </button> <a style='color: #0b0b0b'></a>" +
            " &nbsp;<a href = '{% url 'checkout' %}'><button class='cart btn' id='Checkout' style=\"background-color: #f1f92a\">Checkout</button>";
            }
    localStorage.setItem('cart', JSON.stringify(cart));
    document.getElementById('cart').innerHTML = sum;
    console.log(cart);
}

$('.divpr').on("click", "button.minus", function() {
    a = this.id.slice(7, );
    console.log(a)
    cart['pr' + a][0] = cart['pr' + a][0] - 1;
    console.log(cart['pr' + a][0])
    cart['pr' + a][0] = Math.max(0, cart['pr' + a][0]);
    document.getElementById('valpr' + a).innerHTML = cart['pr' + a][0];
    if(cart['pr' + a][0]==0){
        document.getElementById('divpr' + a).innerHTML = "<div class=' divpr' id='divpr" + a + "' ><button type='button' id='pr" + a + "' class='btn cart' style=\"background-color: #f1f92a\">Add to cart</button>"
        delete cart['pr' + a];
    }
    else {
        document.getElementById('valpr' + a).innerHTML = cart['pr' + a][0];
    }
    updateCart(cart);
});
$('.divpr').on("click", "button.plus", function() {
    a = this.id.slice(6, );
    cart['pr' + a][0] = cart['pr' + a][0] + 1;
    document.getElementById('valpr' + a).innerHTML = cart['pr' + a][0];
    updateCart(cart);
});
</script>
{% endblock %}